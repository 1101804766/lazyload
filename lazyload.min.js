/*!
 * author:jieyou
 * contacts:baidu hi->youyo1122
 * see https://github.com/jieyou/lazyload
 */
!function(a,b,c,d){function i(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold}function j(c,f){var g;return g=f.container===d||f.container===b?e.width()+(a.fn.scrollLeft?e.scrollLeft():b.pageXOffset):a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold}function k(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()}function l(c,f){var g;return g=f.container===d||f.container===b?a.fn.scrollLeft?e.scrollLeft():b.pageXOffset:a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()}function m(b,c){var d=0;b.each(function(){function e(){b.trigger("_lazyload_appear"),d=0}var b=a(this);if(!c.skip_invisible||b.width()||b.height()||"none"===b.css("display"))if(c.vertical_only)if(k(this,c));else if(i(this,c)){if(++d>c.failure_limit)return!1}else e();else if(k(this,c)||l(this,c));else if(i(this,c)||j(this,c)){if(++d>c.failure_limit)return!1}else e()})}function n(b){var c=a.grep(b,function(a){return!a._lazyload_loadStarted});return a(c)}var e=a(b),f={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,vertical_only:!1,minimum_interval:300,use_minimum_interval_in_ios:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"},g=/(?:iphone|ipod|ipad).*os/gi.test(navigator.appVersion),h=g&&/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion);a.fn.lazyload=function(c){var j,k,l,p,i=this,o=null;return a.isPlainObject(c)||(c={}),a.each(f,function(a,b){!f.hasOwnProperty(a)||c.hasOwnProperty(a)&&typeof c[a]==typeof f[a]||(c[a]=b)}),j=c.container===d||c.container===b?e:a(c.container),k="scroll"==c.event,l=k||"scrollstart"==c.event||"scrollstop"==c.event,i.each(function(){var b=this,d=a(b),e=d.attr("src"),f=d.attr("data-"+c.data_attribute),g=d.is("img");return 1==b._lazyload_loadStarted||e==f?(b._lazyload_loadStarted=!0,i=n(i),void 0):(b._lazyload_loadStarted=!1,g&&!e&&d.on("error",function(){d.attr("src",c.placeholderRealImg)}).attr("src",c.placeholderDataImg),d.one("_lazyload_appear",function(){var e,j,h=a.isArray(c.effect_params);b._lazyload_loadStarted||(j="show"!=c.effect&&a.fn[c.effect]&&(!c.effect_params||h&&0==c.effect_params.length),c.appear&&(e=i.length,c.appear.call(b,e,c)),b._lazyload_loadStarted=!0,a("<img />").on("load",function(){var a;j&&d.hide(),g?d.attr("src",f):d.css("background-image",'url("'+f+'")'),j&&d[c.effect].apply(d,h?c.effect_params:[]),i=n(i),c.load&&(a=i.length,c.load.call(b,a,c))}).attr("src",f))}),l||d.on(c.event,function(){b._lazyload_loadStarted||d.trigger("_lazyload_appear")}),void 0)}),l&&(p="number"==typeof c.minimum_interval&&0!=c.minimum_interval,j.on(c.event,function(){return!k||!p||g&&!c.use_minimum_interval_in_ios?m(i,c):(o||(o=setTimeout(function(){m(i,c),o=null},c.minimum_interval)),void 0)})),e.on("resize load",function(){m(i,c)}),h&&e.on("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&i.trigger("_lazyload_appear")}),a(function(){m(i,c)}),this}}(window.jQuery||window.Zepto,window,document);